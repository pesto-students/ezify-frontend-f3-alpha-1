"use strict";(self.webpackChunkezzify_pesto_frontend=self.webpackChunkezzify_pesto_frontend||[]).push([[782],{782:function(e,r,n){n.r(r),n.d(r,{default:function(){return w}});var s=n(1413),t=n(5861),a=n(885),i=n(7757),o=n.n(i),c=n(2791),d=n(6916),u=n(3496),l=n(9271),h=n(6727),v=n(184),x=(0,l.withRouter)((function(e){var r=e.title,n=e.value,t=e.btnText,a=e.btnLink,i=e.xaxis,o=e.series,c=e.history,d={type:"button",text:t,classes:"customButton-ghost cp-4",onClick:function(){return c.push(a)}},l={options:{chart:{id:"column-chart"},xaxis:i,markers:{size:5},colors:["#09b162"]},series:o};return(0,v.jsx)("div",{className:"dashboardBarChart mt-4",children:(0,v.jsxs)("div",{className:"row",children:[(0,v.jsxs)("div",{className:"col-4",children:[(0,v.jsx)("div",{className:"dashboardBarChart__title",children:r}),(0,v.jsx)("div",{className:"dashboardBarChart__value",children:n}),(0,v.jsx)(h.Z,(0,s.Z)({},d))]}),(0,v.jsx)("div",{className:"col-8",children:(0,v.jsx)(u.Z,{options:l.options,series:l.series,type:"bar",height:"400"})})]})})})),f=n(1655),p=function(){return(0,v.jsx)("div",{className:"dashboardCard",children:(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-3 d-flex align-items-center justify-content-center",children:(0,v.jsx)("img",{src:f,alt:"Service",className:"w-100"})}),(0,v.jsxs)("div",{className:"col-9",children:[(0,v.jsx)("div",{className:"dashboardCard__title",children:"Total Earnings"}),(0,v.jsx)("div",{className:"dashboardCard__value",children:"68K"})]})]})})},b=(0,l.withRouter)((function(e){var r=e.title,n=e.xaxis,t=e.value,a=e.btnLink,i=e.btnText,o=e.series,c=e.history,d={type:"button",text:i,classes:"customButton-ghost cp-4",onClick:function(){return c.push(a)}},l={options:{chart:{id:"line-chart"},xaxis:n,markers:{size:5},colors:["#09b162"]},series:o};return(0,v.jsx)("div",{className:"dashboardLineChart mt-4",children:(0,v.jsxs)("div",{className:"row",children:[(0,v.jsxs)("div",{className:"col-4",children:[(0,v.jsx)("div",{className:"dashboardLineChart__title",children:r}),(0,v.jsx)("div",{className:"dashboardLineChart__value",children:t}),(0,v.jsx)(h.Z,(0,s.Z)({},d))]}),(0,v.jsx)("div",{className:"col-8",children:(0,v.jsx)(u.Z,{options:l.options,series:l.series,type:"line",height:"400"})})]})})})),m=n(4872),g=n(364),j=n(2426),k=n.n(j),N=n(7391),_=n(6606),E=n(5335),y=(0,d.zB)({token:m.r,userDetails:m.u}),w=(0,g.$j)(y)((function(e){var r=e.userDetails,n=e.token,i=r.roles,d=(0,c.useContext)(N.D),u=[],l=(0,c.useState)({title:"vendor"===i?"Earnings":"Vendors",value:"vendor"===i?"INR 0":"0",btnText:"vendor"===i?"Open Earnings":"Open Vendors",btnLink:"vendor"===i?"/dashboard/vendorEarnings":"/dashboard/vendors",xaxis:{categories:u},series:[]}),h=(0,a.Z)(l,2),f=h[0],m=h[1],g=(0,c.useState)({title:"Bookings",value:"0",btnText:"Open Bookings",btnLink:"/dashboard/vendorBookings",xaxis:{categories:u},series:[]}),j=(0,a.Z)(g,2),y=j[0],w=j[1],Y=function(e){if(Array.isArray(e)&&e.length>0){var n=[0,0,0,0,0,0,0],s=0;if("vendor"===r.roles)e.forEach((function(e){s+=e.baseprice;var r=k()(e.createdAt).format("DD MMM, YYYY"),t=u.findIndex((function(e){return e===r}));n[t]+=e.baseprice}));else if("admin"===r.roles){var t={};e.forEach((function(e){var r=k()(e.createdAt).format("DD MMM, YYYY"),s=u.findIndex((function(e){return e===r}));t.hasOwnProperty(r)?t[r]+=1:t[r]=1,n[s]=t[r]}))}m({title:"vendor"===i?"Earnings":"Vendors",value:"vendor"===i?"INR ".concat(s):e.length,btnText:"vendor"===i?"Open Earnings":"Open Vendors",btnLink:"vendor"===i?"/dashboard/vendorEarnings":"/dashboard/vendors",xaxis:{categories:u},series:[{name:"vendor"===r.roles?"Earnings":"Vendors",data:n}]})}},C=function(){var e=(0,t.Z)(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.e)(B);case 2:r=e.sent,Y(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,t.Z)(o().mark((function e(){var s,t,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={Authorization:"Bearer ".concat(n)},"vendor"!==r.roles){e.next=8;break}return e.next=4,d.getData(E.Y.VIEW_ALL_EARNINGS,{headers:s});case 4:return t=e.sent,e.abrupt("return",t);case 8:if("admin"!==r.roles){e.next=13;break}return e.next=11,d.getData(E.Y.FETCH_ALL_VENDORS,{headers:s});case 11:return a=e.sent,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){if(Array.isArray(e)&&e.length>0){var n=[0,0,0,0,0,0,0];if("vendor"===r.roles){var s={};e.forEach((function(e,r){var t=k()(e.createdAt).format("DD MMM, YYYY"),a=u.findIndex((function(e){return e===t}));s.hasOwnProperty(t)?s[t]+=1:s[t]=1,n[a]=s[t]}))}w({title:"Bookings",value:e.length,btnText:"Open Bookings",btnLink:"/dashboard/vendorBookings",xaxis:{categories:u},series:[{name:"Bookings",data:n}]})}},L=function(){var e=(0,t.Z)(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.e)(O);case 2:r=e.sent,D(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,t.Z)(o().mark((function e(){var s,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={Authorization:"Bearer ".concat(n)},"vendor"!==r.roles){e.next=6;break}return e.next=4,d.getData(E.Y.FETCH_VENDOR_BOOKINGS,{headers:s});case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){!function(){for(var e=6;e>=0;e--){var r=k()().subtract(e,"d").format("DD MMM, YYYY");u.push(r)}m({title:"vendor"===i?"Earnings":"Vendors",value:"vendor"===i?"INR 0":"0",btnText:"vendor"===i?"Open Earnings":"Open Vendors",btnLink:"vendor"===i?"/dashboard/vendorEarnings":"/dashboard/vendors",xaxis:{categories:u},series:[]})}(),C(),L()}),[]),(0,v.jsxs)("div",{className:"dashboardContainer container",children:[(0,v.jsxs)("h2",{className:"dashboardContainer__greetings",children:["Hello ",r.firstName,","]}),(0,v.jsxs)("div",{className:"d-flex align-items-center justify-content-start mt-4",children:[(0,v.jsx)(p,{}),(0,v.jsx)(p,{}),(0,v.jsx)(p,{})]}),(0,v.jsx)(b,(0,s.Z)({},f)),"vendor"===r.roles&&(0,v.jsx)(x,(0,s.Z)({},y))]})}))},1655:function(e,r,n){e.exports=n.p+"static/media/earningsIconGreen.6ba12849010a7c46b2ab.webp"}}]);
//# sourceMappingURL=782.68124eca.chunk.js.map