"use strict";(self.webpackChunkezzify_pesto_frontend=self.webpackChunkezzify_pesto_frontend||[]).push([[779],{1779:function(e,a,i){i.r(a),i.d(a,{default:function(){return F}});var s=i(1413),l=i(5861),t=i(885),r=i(7757),n=i.n(r),o=i(2791),d=i(6864),m=i(6863),c=i(6916),u=i(6127),f=i(5211),p=i(6727),b=i(364),g=i(4872),x=i(9748),h=i(6606),N=i(7391),v=i(5335),j=i(5308),_=i(184),y=(0,c.zB)({userDetails:g.u,userToken:g.r}),F=(0,b.$j)(y,(function(e){return{setUser:function(a){return e((0,j.l)(a))}}}))((function(e){var a=e.userDetails,i=e.userToken,r=e.setUser,c=(0,o.useContext)(N.D),b=(0,o.useState)(!1),g=(0,t.Z)(b,2),j=g[0],y=g[1],F=(0,o.useState)(a.profileImage),Z=(0,t.Z)(F,2),P=Z[0],k=Z[1],C=u.State.getStatesOfCountry("IN").map((function(e){return{value:e.isoCode,label:e.name}})),I=C.find((function(e){return e.label===a.state})).value,w=u.City.getCitiesOfState("IN",I).map((function(e){return{value:e.name,label:e.name}})),S=["image/png","image/jpeg","image/jpg"],M=(0,d.TA)({initialValues:{firstName:a.firstName,lastName:a.lastName,mobileNumber:a.mobileNumber,state:a.state,stateCode:I,city:a.city,address:a.address,profileImage:a.profileImage,profileImageFile:"",roles:a.roles},validationSchema:m.Ry({firstName:m.Z_().min(3).max(15,"Must be 15 characters or less").required("Required"),lastName:m.Z_().min(3).max(20,"Must be 20 characters or less").required("Required"),mobileNumber:m.Z_("Invalid mobile number").min(10,"Must be a valid 10 digit number").max(10,"Must be a valid 10 digit number").required("Required"),state:m.Z_("Invalid state").required("Required"),stateCode:m.Z_("Invalid state").required("Required"),city:m.Z_("Invalid city").required("Required"),address:m.nK().when("roles",{is:"user",then:m.Z_("Invalid address").min(10).max(200).required("Required"),otherwise:m.nK().nullable()}),profileImageFile:m.nK().nullable().test("FILE_SIZE","File should be less than 3mb",(function(e){return!e||e&&e.size>3072})).test("FILE_FORMAT","File should be in png/jpg/jpeg format",(function(e){return!e||e&&S.includes(null===e||void 0===e?void 0:e.type)}))}),onSubmit:function(e){console.log(e),M.isValid&&V()}}),V=function(){var e=(0,l.Z)(n().mark((function e(){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.e)(q);case 2:a=e.sent,r(a),y(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,l.Z)(n().mark((function e(){var s,l,t,r,o,d,m,u,f,p,b,g;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=M.values,l=s.firstName,t=s.lastName,r=s.mobileNumber,o=s.state,d=s.city,m=s.address,u=s.profileImageFile,(f=new FormData).append("firstName",l),f.append("lastName",t),f.append("mobileNumber",r),f.append("state",o),f.append("city",d),f.append("address",m),p={Authorization:"Bearer ".concat(i),"content-type":"multipart/form-data"},b=v.Y.UPDATE_USER,"user"===a.roles?f.append("file",u):"vendor"===a.roles&&(f.append("profileImage",u),b=v.Y.UPDATE_VENDOR),e.next=13,c.patchData(b,f,{headers:p});case 13:return g=e.sent,e.abrupt("return",g);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R={type:"button",text:"Update Profile",classes:"font-weight-bold",onClick:function(){return y(!0)}},E=(0,o.useState)({type:"submit",text:"Save Changes",classes:"font-weight-bold mr-3",disabled:!M.isValid}),D=(0,t.Z)(E,2),A=D[0],z=D[1];(0,o.useEffect)((function(){z({type:"submit",text:"Save Changes",classes:"font-weight-bold mr-3",disabled:!M.isValid})}),[M.isValid]);var U={type:"button",text:"Discard Changes",classes:"font-weight-bold red-btn",onClick:function(){k(a.profileImage),y(!1)}},T={id:"firstName",label:"first Name",isMandatory:!0,type:"input-formik",formik:M},L={id:"lastName",label:"Last Name",isMandatory:!0,type:"input-formik",formik:M},O={id:"mobileNumber",label:"Mobile",isMandatory:!0,type:"input-formik",formik:M},B=(0,o.useState)({id:"city",label:"City",isMandatory:!0,type:"select-formik",options:w,defaultValue:w.find((function(e){return e.label===a.city})),onChange:function(e){console.log(e),M.setFieldValue("city",e.value)},formik:M}),K=(0,t.Z)(B,2),Y=K[0],$=K[1],G={id:"state",label:"State",isMandatory:!0,type:"select-formik",options:C,defaultValue:C.find((function(e){return e.label===a.state})),onChange:function(e){M.setFieldValue("state",e.label),M.setFieldValue("stateCode",e.value),w=u.City.getCitiesOfState("IN",e.value).map((function(e){return{value:e.name,label:e.name}})),M.setFieldValue("city",w[0].value),$({id:"city",label:"City",isMandatory:!0,type:"select-formik",options:w,defaultValue:w[0],onChange:function(e){console.log(e),M.setFieldValue("city",e.value)},formik:M})},formik:M},H={id:"address",label:"Address",isMandatory:!0,type:"textarea-formik",formik:M};return(0,_.jsx)("div",{className:"container profilePage",children:(0,_.jsx)("form",{onSubmit:M.handleSubmit,children:(0,_.jsxs)("div",{className:"row",children:[(0,_.jsx)("div",{className:"col-12",children:(0,_.jsx)("h2",{className:"profilePage__title",children:"Your Profile"})}),(0,_.jsx)("div",{className:"col-12 px-5 pl-lg-3 profilePage__box",children:(0,_.jsxs)("div",{className:"row",children:[(0,_.jsx)("div",{className:"col-lg-3 mb-5 mb-lg-0 d-flex align-items-start justify-content-center",children:(0,_.jsxs)("div",{className:"profilePage__image",children:[!j&&(0,_.jsx)("img",{src:a.profileImage,alt:"Profile",className:"profilePage__image--img"}),j&&(0,_.jsx)("img",{src:P,alt:"Profile",className:"profilePage__image--img"}),j&&(0,_.jsx)("img",{src:f,alt:"Edit",className:"profilePage__image--edit",onClick:function(){return document.getElementById("profileImageFile").click()}}),j&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",id:"profileImageFile",onChange:function(e){M.setFieldValue("profileImageFile",e.target.files[0]),function(e){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){k(a.result)}}(e.target.files[0])}}),(0,_.jsx)("small",{className:"text-danger errorMsg",children:M.errors.profileImageFile})]})]})}),(0,_.jsxs)("div",{className:"col-lg-9",children:[(0,_.jsxs)("div",{className:"row border-bottom pb-3",children:[(0,_.jsxs)("div",{className:"col-md-6",children:[!j&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("label",{htmlFor:"firstName",className:"profilePage__box--label",children:"First Name"}),(0,_.jsx)("div",{className:"profilePage__box--value",children:a.firstName})]}),j&&(0,_.jsx)(x.Z,(0,s.Z)({},T))]}),(0,_.jsxs)("div",{className:"col-md-6 mt-4 mt-md-0",children:[!j&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("label",{htmlFor:"firstName",className:"profilePage__box--label",children:"Last Name"}),(0,_.jsx)("div",{className:"profilePage__box--value",children:a.lastName})]}),j&&(0,_.jsx)(x.Z,(0,s.Z)({},L))]})]}),(0,_.jsxs)("div",{className:"row border-bottom pb-3 mt-3",children:[(0,_.jsxs)("div",{className:"col-md-6",children:[(0,_.jsx)("label",{htmlFor:"firstName",className:"profilePage__box--label",children:"Email"}),(0,_.jsx)("div",{className:"profilePage__box--value",children:a.email})]}),(0,_.jsxs)("div",{className:"col-md-6 mt-4 mt-md-0",children:[!j&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("label",{htmlFor:"firstName",className:"profilePage__box--label",children:"Mobile Number"}),(0,_.jsxs)("div",{className:"profilePage__box--value",children:["+91 ",a.mobileNumber]})]}),j&&(0,_.jsx)(x.Z,(0,s.Z)({},O))]})]}),(0,_.jsxs)("div",{className:"row border-bottom pb-3 mt-3",children:[(0,_.jsxs)("div",{className:"col-md-6",children:[!j&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("label",{htmlFor:"firstName",className:"profilePage__box--label",children:"State"}),(0,_.jsx)("div",{className:"profilePage__box--value",children:a.state})]}),j&&(0,_.jsx)(x.Z,(0,s.Z)({},G))]}),(0,_.jsxs)("div",{className:"col-md-6 mt-4 mt-md-0",children:[!j&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("label",{htmlFor:"firstName",className:"profilePage__box--label",children:"City"}),(0,_.jsx)("div",{className:"profilePage__box--value",children:a.city})]}),j&&(0,_.jsx)(x.Z,(0,s.Z)({},Y))]})]}),"vendor"!==a.roles&&(0,_.jsx)("div",{className:"row pb-3 mt-3",children:(0,_.jsxs)("div",{className:"col-12",children:[!j&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("label",{htmlFor:"firstName",className:"profilePage__box--label",children:"Address"}),(0,_.jsx)("div",{className:"profilePage__box--value",children:a.address})]}),j&&(0,_.jsx)(x.Z,(0,s.Z)({},H))]})}),(0,_.jsx)("div",{className:"row mt-3",children:(0,_.jsxs)("div",{className:"col-12 d-flex align-items-center justify-content-end",children:[!j&&(0,_.jsx)(p.Z,(0,s.Z)({},R)),j&&(0,_.jsx)(p.Z,(0,s.Z)({},A)),j&&(0,_.jsx)(p.Z,(0,s.Z)({},U))]})})]})]})})]})})})}))},5211:function(e,a,i){e.exports=i.p+"static/media/edit-icon.bfa5dc328c8514e18705.webp"}}]);
//# sourceMappingURL=779.c2591b55.chunk.js.map