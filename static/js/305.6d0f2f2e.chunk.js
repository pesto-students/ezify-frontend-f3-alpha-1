"use strict";(self.webpackChunkezzify_pesto_frontend=self.webpackChunkezzify_pesto_frontend||[]).push([[305],{2305:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var s=t(1413),r=t(5861),c=t(885),i=t(7757),a=t.n(i),o=t(2791),l=t(6727),u=t(3117),m=t(6916),d=t(6837),f=t(364),p=t(6074),x=t(4872),h=t(7391),v=t(6606),g=t(5335),_=t(7915),y=t(9271),j=t(44),b=t(4667),N=t(184),T=(0,m.zB)({cartItems:d.D1,totalAmount:d.ej,userDetails:x.u,userToken:x.r}),k=(0,f.$j)(T,(function(e){return{removeItemFromCart:function(n){return e((0,p.h2)(n))},disabledItemFromCart:function(n){return e((0,p.bK)(n))},setToasterCofig:function(n){return e((0,_.g)(n))},setCartEmpty:function(){return e((0,p.UY)())}}}))((0,y.withRouter)((function(e){var n=e.cartItems,t=e.totalAmount,i=e.disabledItemFromCart,m=e.userToken,d=e.setCartEmpty,f=e.history,p=(0,o.useContext)(h.D),x=(0,o.useState)(!1),_=(0,c.Z)(x,2),y=_[0],T=_[1],k=(0,o.useState)(!1),w=(0,c.Z)(k,2),C=w[0],P=w[1],E=(0,o.useState)(null),I=(0,c.Z)(E,2),D=I[0],A=I[1],R=function(){var e=(0,r.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.e)(S);case 2:n=e.sent,console.log(n),n&&(A({title:"",message:"Payment Successfully Done"}),T(!0),d()),console.log(m);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,r.Z)(a().mark((function e(){var s,r,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={total_amount:t,bookings:[]},n.forEach((function(e){e.active&&s.bookings.push({serviceID:e.serviceID,vendorID:e.vendorID,baseprice:e.basePrice})})),r={Authorization:"Bearer ".concat(m)},console.log(s),e.next=6,p.postData(g.Y.CREATE_PAYMENT,s,{headers:r});case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=(0,o.useState)({type:"submit",text:"PAY NOW",classes:"cp-3 btn-block",onClick:function(){return P(!0)}}),Z=(0,c.Z)(Y,2),M=Z[0],z=Z[1];return(0,o.useEffect)((function(){z(t<=0?{type:"submit",text:"PAY NOW",classes:"cp-3 btn-block",disabled:!0,onClick:function(){return P(!0)}}:{type:"submit",text:"PAY NOW",classes:"cp-3 btn-block",disabled:!1,onClick:function(){return P(!0)}})}),[t]),(0,o.useEffect)((function(){C&&(m?R():(A({title:"\ud83d\udca5 Warning",message:"Please Login"}),T(!0)))}),[m,C]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"payment-page px-3 px-lg-0",children:(0,N.jsx)("div",{className:"container",children:(0,N.jsxs)("div",{className:"row py-4",children:[(0,N.jsx)("div",{className:"col-9 mx-auto payment-page__heading-text py-2",children:"PAYMENT"}),(0,N.jsxs)("div",{className:"col-lg-9 col-md-11 payment-page__custom-container mx-auto",children:[(0,N.jsxs)("div",{className:"payment-page__custom-container-1 customScroll",children:[n.length>0&&n.map((function(e,n){return(0,N.jsxs)("div",{className:"row payment-page__vendorTile mb-2 mr-2",children:[(0,N.jsx)("div",{className:"col-2 d-flex align-items-center justify-content-center ".concat(e.active?null:"custom-blur"),children:(0,N.jsx)("img",{src:e.profileImage,alt:"Vendor Profile",className:"h-100 w-100 rounded-circle"})}),(0,N.jsxs)("div",{className:"col-4 ".concat(e.active?null:"custom-blur"),children:[(0,N.jsx)("div",{className:"mb-2 d-flex align-items-center justify-content-start payment-page__vendorTile__icons",children:e.serviceName}),(0,N.jsx)("div",{className:"d-flex align-items-center justify-content-between payment-page__vendorTile__nameRatings",children:(0,N.jsxs)("div",{className:"payment-page__vendorTile__name",children:[e.firstName," ",e.lastName]})})]}),(0,N.jsxs)("div",{className:"col-3 offset-3 d-flex align-items-end justify-content-between flex-column",children:[(0,N.jsx)("div",{className:"",children:(0,N.jsx)("input",{type:"checkbox",className:"custom-toggle-btn",checked:e.active,onChange:function(){return i(e.serviceID)}})}),(0,N.jsxs)("div",{className:"d-flex align-items-center justify-content-between payment-page__vendorTile__pricing",children:[(0,N.jsx)("img",{src:u,alt:"Rupee Symbol"}),(0,N.jsx)("span",{className:"ml-2",children:e.basePrice})]})]})]},n)})),0===n.length&&(0,N.jsx)("h2",{className:"text-center",children:"Your cart is empty"})]}),(0,N.jsxs)("div",{className:"col-12 d-flex align-items-end justify-content-between flex-column mb-3",children:[(0,N.jsx)("div",{className:"payment-page__final-pricing",children:(0,N.jsx)("span",{className:"",children:(0,N.jsx)("b",{children:"Total"})})}),(0,N.jsxs)("div",{className:"d-flex align-items-center justify-content-between payment-page__vendorTile__pricing payment-page__final-pricing",children:[(0,N.jsx)("img",{src:u,alt:"Rupee Symbol"}),(0,N.jsx)("span",{className:"ml-2",children:t})]})]}),(0,N.jsx)("div",{className:"col-12 d-flex align-items-center justify-content-center",children:(0,N.jsx)(l.Z,(0,s.Z)({},M))})]})]})})}),(0,N.jsxs)(b.Z,{show:y,handleClose:function(){"Payment Successfully Done"===D.message&&f.push("/bookings"),T(!1),P(!1)},handleShow:function(){return T(!0)},size:"md",children:[(0,N.jsxs)(j.Z.Header,{closeButton:!0,children:[null===D||void 0===D?void 0:D.title," "]}),(0,N.jsx)(j.Z.Body,{children:(0,N.jsx)("p",{className:"mb-0 text-center font-weight-bold",children:null===D||void 0===D?void 0:D.message})})]})]})})))},6074:function(e,n,t){t.d(n,{Q0:function(){return r},h2:function(){return c},bK:function(){return i},UY:function(){return a}});var s=t(6567),r=function(e){return{type:s._.SET_ITEM_TO_CART,payload:e}},c=function(e){return{type:s._.REMOVE_ITEM_FROM_CART,payload:e}},i=function(e){return{type:s._.DISABLE_ITEM_FROM_CART,payload:e}},a=function(){return{type:s._.EMPTY_CART}}},6837:function(e,n,t){t.d(n,{D1:function(){return r},s0:function(){return c},Y7:function(){return i},ej:function(){return a}});var s=t(6916),r=(0,s.P1)([function(e){return e.cart}],(function(e){return e.items})),c=((0,s.P1)([r],(function(e){return e.map((function(e){return e.id}))})),(0,s.P1)([r],(function(e){return e.map((function(e){return e.vendorID}))}))),i=(0,s.P1)([r],(function(e){return e.map((function(e){return e.serviceID}))})),a=(0,s.P1)([r],(function(e){var n=0;return e.map((function(e){e.active&&(n+=e.basePrice)})),n}))},3117:function(e,n,t){e.exports=t.p+"static/media/rupee.bc6defe8c0aee382f52f.webp"}}]);
//# sourceMappingURL=305.6d0f2f2e.chunk.js.map